<!DOCTYPE html>
<html lang="en-us">

<head>
  

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>

<link rel="shortcut icon" type="image/png" href="/favicon.ico"/>


<link rel='stylesheet' href='/style.min.0122b8d14d9247c2ac34fa87ad975f23eb927ad958d8ae6bda2caccd9ac9eb42.css'>


<script src='/main.min.db37c27117ff8400e5e30549f6806d2bc825668b596d81316c6148417f59bc72.js' async></script>


  <title>Guidelines and best practices - Mastodon documentation</title>

  <meta property="og:type" content="article">
  <meta property="og:url" content="https://docs.joinmastodon.org/api/guidelines/">

  
    <meta name="description" content="Things to keep in mind when implementing a Mastodon app.">
    <meta property="og:description" content="Things to keep in mind when implementing a Mastodon app.">
    <meta name="twitter:description" content="Things to keep in mind when implementing a Mastodon app.">
  

  <meta name="twitter:title" content="Guidelines and best practices">
  <meta name="twitter:site" content="@joinmastodon">

  <link rel="canonical" href="https://docs.joinmastodon.org/api/guidelines/">
</head>

<body>
  <div class="container sidebar-layout">
    <nav class="sidebar"><a class="brand" href="/">
  <img class="link-logo" src="/brand.svg" alt="Mastodon" />
</a>

<input id="mobile-nav-toggle" class="mobile-nav-toggle" type="checkbox">
<label for="mobile-nav-toggle">
    <span class="menu-open">
        <i class="fa fa-times"></i> Close
    </span>
    <span class="menu-close">
        <i class="fa fa-bars"></i> Menu
    </span>
</label>

<ul>
  
  
    <li>
      
        <a href="/" class="">What is Mastodon?</a>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">Using Mastodon</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/user/signup/" class="">Signing up for an account</a>

              
            </li>
          
            <li>
              <a href="/user/profile/" class="">Setting up your profile</a>

              
            </li>
          
            <li>
              <a href="/user/posting/" class="">Posting to your profile</a>

              
            </li>
          
            <li>
              <a href="/user/network/" class="">Using the network features</a>

              
            </li>
          
            <li>
              <a href="/user/moderating/" class="">Dealing with unwanted content</a>

              
            </li>
          
            <li>
              <a href="/user/discoverability/" class="">Promoting yourself and others</a>

              
            </li>
          
            <li>
              <a href="/user/preferences/" class="">Set your preferences</a>

              
            </li>
          
            <li>
              <a href="/user/contacts/" class="">More settings</a>

              
            </li>
          
            <li>
              <a href="/user/external/" class="">Using Mastodon externally</a>

              
            </li>
          
            <li>
              <a href="/user/moving/" class="">Moving or leaving accounts</a>

              
            </li>
          
            <li>
              <a href="/user/run-your-own/" class="">Running your own server</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">Running Mastodon</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/admin/prerequisites/" class="">Preparing your machine</a>

              
            </li>
          
            <li>
              <a href="/admin/install/" class="">Installing from source</a>

              
            </li>
          
            <li>
              <a href="/admin/config/" class="">Configuring your environment</a>

              
            </li>
          
            <li>
              <a href="/admin/elasticsearch/" class="">Configuring full-text search</a>

              
            </li>
          
            <li>
              <a href="/admin/optional/" class="">Installing optional features</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/admin/optional/object-storage/" class="">Configuring object storage</a>
                    </li>
                  
                    <li>
                      <a href="/admin/optional/tor/" class="">Onion services</a>
                    </li>
                  
                    <li>
                      <a href="/admin/optional/sso/" class="">Single Sign On</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/admin/setup/" class="">Setting up your new instance</a>

              
            </li>
          
            <li>
              <a href="/admin/tootctl/" class="">Using the admin CLI</a>

              
            </li>
          
            <li>
              <a href="/admin/upgrading/" class="">Upgrading to a new release</a>

              
            </li>
          
            <li>
              <a href="/admin/backups/" class="">Backing up your server</a>

              
            </li>
          
            <li>
              <a href="/admin/migrating/" class="">Migrating to a new machine</a>

              
            </li>
          
            <li>
              <a href="/admin/scaling/" class="">Scaling up your server</a>

              
            </li>
          
            <li>
              <a href="/admin/moderation/" class="">Moderation actions</a>

              
            </li>
          
            <li>
              <a href="/admin/troubleshooting/" class="">Troubleshooting errors</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/admin/troubleshooting/index-corruption/" class="">Database index corruption</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/admin/roles/" class="">Roles</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">Developing Mastodon apps</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/client/intro/" class="">Getting started with the API</a>

              
            </li>
          
            <li>
              <a href="/client/public/" class="">Playing with public data</a>

              
            </li>
          
            <li>
              <a href="/client/token/" class="">Obtaining client app access</a>

              
            </li>
          
            <li>
              <a href="/client/authorized/" class="">Logging in with an account</a>

              
            </li>
          
            <li>
              <a href="/client/libraries/" class="">Libraries and implementations</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">Contributing to Mastodon</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/dev/overview/" class="">Technical overview</a>

              
            </li>
          
            <li>
              <a href="/dev/setup/" class="">Setting up a dev environment</a>

              
            </li>
          
            <li>
              <a href="/dev/code/" class="">Code structure</a>

              
            </li>
          
            <li>
              <a href="/dev/routes/" class="">Routes</a>

              
            </li>
          
            <li>
              <a href="/dev/disclosure/" class="">Bug bounties and responsible disclosure</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">Spec compliance</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/spec/activitypub/" class="">ActivityPub</a>

              
            </li>
          
            <li>
              <a href="/spec/webfinger/" class="">WebFinger</a>

              
            </li>
          
            <li>
              <a href="/spec/security/" class="">Security</a>

              
            </li>
          
            <li>
              <a href="/spec/microformats/" class="">Microformats</a>

              
            </li>
          
            <li>
              <a href="/spec/oauth/" class="">OAuth</a>

              
            </li>
          
            <li>
              <a href="/spec/bearcaps/" class="">Bearcaps</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">REST API</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/api/guidelines/" class="active">Guidelines and best practices</a>

              
            </li>
          
            <li>
              <a href="/api/oauth-scopes/" class="">OAuth Scopes</a>

              
            </li>
          
            <li>
              <a href="/api/rate-limits/" class="">Rate limits</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">API Methods</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/methods/apps/" class="">apps</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/oauth/" class="">oauth</a>
                    </li>
                  
                    <li>
                      <a href="/methods/emails/" class="">emails</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/accounts/" class="">accounts</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/bookmarks/" class="">bookmarks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/favourites/" class="">favourites</a>
                    </li>
                  
                    <li>
                      <a href="/methods/mutes/" class="">mutes</a>
                    </li>
                  
                    <li>
                      <a href="/methods/blocks/" class="">blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/domain_blocks/" class="">domain_blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/filters/" class="">filters</a>
                    </li>
                  
                    <li>
                      <a href="/methods/reports/" class="">reports</a>
                    </li>
                  
                    <li>
                      <a href="/methods/follow_requests/" class="">follow_requests</a>
                    </li>
                  
                    <li>
                      <a href="/methods/endorsements/" class="">endorsements</a>
                    </li>
                  
                    <li>
                      <a href="/methods/featured_tags/" class="">featured_tags</a>
                    </li>
                  
                    <li>
                      <a href="/methods/preferences/" class="">preferences</a>
                    </li>
                  
                    <li>
                      <a href="/methods/followed_tags/" class="">followed_tags</a>
                    </li>
                  
                    <li>
                      <a href="/methods/suggestions/" class="">suggestions</a>
                    </li>
                  
                    <li>
                      <a href="/methods/tags/" class="">tags</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/profile/" class="">profile</a>

              
            </li>
          
            <li>
              <a href="/methods/statuses/" class="">statuses</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/media/" class="">media</a>
                    </li>
                  
                    <li>
                      <a href="/methods/polls/" class="">polls</a>
                    </li>
                  
                    <li>
                      <a href="/methods/scheduled_statuses/" class="">scheduled_statuses</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/timelines/" class="">timelines</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/conversations/" class="">conversations</a>
                    </li>
                  
                    <li>
                      <a href="/methods/lists/" class="">lists</a>
                    </li>
                  
                    <li>
                      <a href="/methods/markers/" class="">markers</a>
                    </li>
                  
                    <li>
                      <a href="/methods/streaming/" class="">streaming</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/notifications/" class="">notifications</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/push/" class="">push</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/search/" class="">search</a>

              
            </li>
          
            <li>
              <a href="/methods/instance/" class="">instance</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/trends/" class="">trends</a>
                    </li>
                  
                    <li>
                      <a href="/methods/directory/" class="">directory</a>
                    </li>
                  
                    <li>
                      <a href="/methods/custom_emojis/" class="">custom_emojis</a>
                    </li>
                  
                    <li>
                      <a href="/methods/announcements/" class="">announcements</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/admin/" class="">admin</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/methods/admin/accounts/" class="">accounts</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/canonical_email_blocks/" class="">canonical_email_blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/dimensions/" class="">dimensions</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/domain_allows/" class="">domain_allows</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/domain_blocks/" class="">domain_blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/email_domain_blocks/" class="">email_domain_blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/ip_blocks/" class="">ip_blocks</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/measures/" class="">measures</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/reports/" class="">reports</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/retention/" class="">retention</a>
                    </li>
                  
                    <li>
                      <a href="/methods/admin/trends/" class="">trends</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/methods/proofs/" class="">proofs</a>

              
            </li>
          
            <li>
              <a href="/methods/oembed/" class="">oembed</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">API Entities</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/entities/Account/" class="">Account</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Account/" class="">Admin::Account</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_CanonicalEmailBlock/" class="">Admin::CanonicalEmailBlock</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Cohort/" class="">Admin::Cohort</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Dimension/" class="">Admin::Dimension</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_DomainAllow/" class="">Admin::DomainAllow</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_DomainBlock/" class="">Admin::DomainBlock</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_EmailDomainBlock/" class="">Admin::EmailDomainBlock</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Ip/" class="">Admin::Ip</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_IpBlock/" class="">Admin::IpBlock</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Measure/" class="">Admin::Measure</a>

              
            </li>
          
            <li>
              <a href="/entities/Admin_Report/" class="">Admin::Report</a>

              
            </li>
          
            <li>
              <a href="/entities/Announcement/" class="">Announcement</a>

              
            </li>
          
            <li>
              <a href="/entities/Application/" class="">Application</a>

              
            </li>
          
            <li>
              <a href="/entities/Context/" class="">Context</a>

              
            </li>
          
            <li>
              <a href="/entities/Conversation/" class="">Conversation</a>

              
            </li>
          
            <li>
              <a href="/entities/CustomEmoji/" class="">CustomEmoji</a>

              
            </li>
          
            <li>
              <a href="/entities/DomainBlock/" class="">DomainBlock</a>

              
            </li>
          
            <li>
              <a href="/entities/Error/" class="">Error</a>

              
            </li>
          
            <li>
              <a href="/entities/ExtendedDescription/" class="">ExtendedDescription</a>

              
            </li>
          
            <li>
              <a href="/entities/FamiliarFollowers/" class="">FamiliarFollowers</a>

              
            </li>
          
            <li>
              <a href="/entities/FeaturedTag/" class="">FeaturedTag</a>

              
            </li>
          
            <li>
              <a href="/entities/Filter/" class="">Filter</a>

              
            </li>
          
            <li>
              <a href="/entities/FilterKeyword/" class="">FilterKeyword</a>

              
            </li>
          
            <li>
              <a href="/entities/FilterResult/" class="">FilterResult</a>

              
            </li>
          
            <li>
              <a href="/entities/FilterStatus/" class="">FilterStatus</a>

              
            </li>
          
            <li>
              <a href="/entities/IdentityProof/" class="">IdentityProof</a>

              
            </li>
          
            <li>
              <a href="/entities/Instance/" class="">Instance</a>

              
            </li>
          
            <li>
              <a href="/entities/List/" class="">List</a>

              
            </li>
          
            <li>
              <a href="/entities/Marker/" class="">Marker</a>

              
            </li>
          
            <li>
              <a href="/entities/MediaAttachment/" class="">MediaAttachment</a>

              
            </li>
          
            <li>
              <a href="/entities/Notification/" class="">Notification</a>

              
            </li>
          
            <li>
              <a href="/entities/Poll/" class="">Poll</a>

              
            </li>
          
            <li>
              <a href="/entities/Preferences/" class="">Preferences</a>

              
            </li>
          
            <li>
              <a href="/entities/PreviewCard/" class="">PreviewCard</a>

              
            </li>
          
            <li>
              <a href="/entities/Reaction/" class="">Reaction</a>

              
            </li>
          
            <li>
              <a href="/entities/Relationship/" class="">Relationship</a>

              
            </li>
          
            <li>
              <a href="/entities/RelationshipSeveranceEvent/" class="">RelationshipSeveranceEvent</a>

              
            </li>
          
            <li>
              <a href="/entities/Report/" class="">Report</a>

              
            </li>
          
            <li>
              <a href="/entities/Role/" class="">Role</a>

              
            </li>
          
            <li>
              <a href="/entities/Rule/" class="">Rule</a>

              
            </li>
          
            <li>
              <a href="/entities/ScheduledStatus/" class="">ScheduledStatus</a>

              
            </li>
          
            <li>
              <a href="/entities/Search/" class="">Search</a>

              
            </li>
          
            <li>
              <a href="/entities/Status/" class="">Status</a>

              
            </li>
          
            <li>
              <a href="/entities/StatusEdit/" class="">StatusEdit</a>

              
            </li>
          
            <li>
              <a href="/entities/StatusSource/" class="">StatusSource</a>

              
            </li>
          
            <li>
              <a href="/entities/Suggestion/" class="">Suggestion</a>

              
            </li>
          
            <li>
              <a href="/entities/Tag/" class="">Tag</a>

              
            </li>
          
            <li>
              <a href="/entities/Token/" class="">Token</a>

              
            </li>
          
            <li>
              <a href="/entities/Translation/" class="">Translation</a>

              
            </li>
          
            <li>
              <a href="/entities/V1_Filter/" class="">V1::Filter</a>

              
            </li>
          
            <li>
              <a href="/entities/V1_Instance/" class="">V1::Instance</a>

              
            </li>
          
            <li>
              <a href="/entities/WebPushSubscription/" class="">WebPushSubscription</a>

              
            </li>
          
        </ul>
      
    </li>
  
</ul>
</nav>
    <main>
  <h1>Guidelines and best practices</h1>  
  
    <p>Things to keep in mind when implementing a Mastodon app.</p>
  
  <aside>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#login">Login</a></li>
        <li><a href="#username">Usernames</a></li>
        <li><a href="#id">Handling and sorting IDs</a></li>
        <li><a href="#pagination">Paginating through API responses</a></li>
        <li><a href="#formatting">Formatting</a>
          <ul>
            <li><a href="#tags">Mentions, hashtags, and custom emoji</a></li>
            <li><a href="#links">Link shortening</a></li>
          </ul>
        </li>
        <li><a href="#filters">Filters</a>
          <ul>
            <li><a href="#server-filtered">Server-side filtering (v2, Mastodon 4.0 and above)</a></li>
            <li><a href="#client-filtered">Client-side filtering (v1, prior to Mastodon 4.0)</a></li>
          </ul>
        </li>
        <li><a href="#focal-points">Focal points for cropping media thumbnails</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </aside>
  <div class="e-content">
    <h2 id="login">Login</h2>
<p><strong>The user must be able to log in to any Mastodon server from the app</strong>. This means you must ask for the server&rsquo;s domain and use the app registrations API to dynamically obtain OAuth2 credentials.</p>
<a href="/client/authorized/" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  Logging in with an account
</a>
<a href="/methods/oauth/" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  oauth methods
</a>
<a href="/api/oauth-scopes/" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  OAuth scopes
</a>
<h2 id="username">Usernames</h2>
<p><strong>Decentralization must be transparent to the user</strong>. It should be possible to see that a given user is from another server, for example, by displaying their <code>acct</code> somewhere. Note that <code>acct</code> is equal to <code>username</code> for local users and equal to <code>username@domain</code> for remote users.</p>
<h2 id="id">Handling and sorting IDs</h2>
<p>Vanilla Mastodon entity IDs are generated as integers and cast to string. However, this does not mean that IDs <em>are</em> integers, nor should they be cast to integers! Doing so can lead to broken client apps due to integer overflow, so <strong>always treat IDs as strings.</strong></p>
<p>With that said, because IDs are string representations of numbers, they can still be sorted chronologically very easily by doing the following:</p>
<ol>
<li>Sort by size. Newer statuses will have longer IDs.</li>
<li>Sort lexically. Newer statuses will have at least one digit that is higher when compared positionally.</li>
</ol>
<h2 id="pagination">Paginating through API responses</h2>
<p>Many API methods allow you to paginate for more information, using parameters such as <code>limit</code>, <code>max_id</code>, <code>min_id</code>, and <code>since_id</code>.</p>
<dl>
<dt>limit</dt>
<dd>The maximum number of results to return. Usually, there is a default limit and a maximum limit; these will vary according to the API method.</dd>
<dt>max_id</dt>
<dd>String. All results returned will be lesser than this ID. In effect, sets an upper bound on results.</dd>
<dt>since_id</dt>
<dd>String. All results returned will be greater than this ID. In effect, sets a lower bound on results.</dd>
<dt>min_id</dt>
<dd>String. Returns results immediately newer than this ID. In effect, sets a cursor at this ID and paginates forward. (Available since v2.6.0.)</dd>
</dl>
<p>For example, we might fetch <code>https://mastodon.example/api/v1/accounts/1/statuses</code> with certain parameters, and we will get the following results in the following cases:</p>
<ul>
<li>Setting <code>?max_id=1</code> will return no statuses since there are no statuses with an ID earlier than <code>1</code>.</li>
<li>Setting <code>?since_id=1</code> will return the latest statuses since there have been many statuses since <code>1</code>.</li>
<li>Setting <code>?min_id=1</code> will return the oldest statuses, as <code>min_id</code> sets the cursor.</li>
</ul>
<p>Some API methods operate on entity IDs that are not publicly exposed in the API response and are only known to the backend and the database. (This is usually the case for entities that reference other entities, such as Follow entities which reference Accounts, or Favourite entities which reference Statuses, etc.)</p>
<p>To get around this, Mastodon may return links to a &ldquo;prev&rdquo; and &ldquo;next&rdquo; page. These links are made available via the HTTP <code>Link</code> header on the response. Consider the following fictitious API call:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="color:#50fa7b">GET</span> https://mastodon.example/api/v1/endpoint <span style="color:#ff79c6">HTTP</span><span style="color:#ff79c6">/</span><span style="color:#bd93f9">1.1</span>
Authorization<span style="color:#ff79c6">:</span> Bearer token

Link: &lt;https://mastodon.example/api/v1/endpoint?max_id=7163058&gt;; rel=&#34;next&#34;, &lt;https://mastodon.example/api/v1/endpoint?min_id=7275607&gt;; rel=&#34;prev&#34;
[
  {
    // some Entity
  },
  // more Entities in an Array
]
</code></pre></div><p>In this case, you may retrieve the <code>Link</code> header and parse it for links to the older or newer page. Keep in mind the following rules:</p>
<ul>
<li>The links will be returned all via one <code>Link</code> header, separated by a comma and a space (<code>, </code>)</li>
<li>Each link consists of a URL and a link relation, separated by a semicolon and a space (<code>; </code>)</li>
<li>The URL will be surrounded by angle brackets (<code>&lt;&gt;</code>), and the link relation will be surrounded by double quotes (<code>&quot;&quot;</code>) and prefixed with <code>rel=</code>.</li>
<li>The value of the link relation will be either <code>prev</code> or <code>next</code>.</li>
</ul>
<p>Following the <code>next</code> link should show you older results. Following the <code>prev</code> link should show you newer results.</p>
<h2 id="formatting">Formatting</h2>
<p>Plain text is not available for content from remote servers, and plain text syntax rules may vary wildly between Mastodon and other fediverse applications. For certain attributes, such as the content of statuses, <strong>Mastodon provides sanitized HTML</strong>. See <a href="/spec/activitypub/#sanitization">HTML Sanitization</a> for more details. You may expect these tags to appear in the content:</p>
<ul>
<li><code>&lt;p&gt;</code></li>
<li><code>&lt;br&gt;</code></li>
<li><code>&lt;span&gt;</code></li>
<li><code>&lt;a&gt;</code></li>
</ul>
<a href="/spec/activitypub/#sanitization" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  ActivityPub &gt; HTML Sanitization
</a>
<h3 id="tags">Mentions, hashtags, and custom emoji</h3>
<p>Mentions and hashtags are <code>&lt;a&gt;</code> tags. Custom emojis remain in their plain text shortcode form. To give those entities their semantic meaning and add special handling, such as opening a mentioned profile within your app instead of as a web page, metadata is included with the <a href="/entities/Status/">Status</a>, which can be matched to a particular tag.</p>
<a href="/entities/Status/" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  Status entity
</a>
<a href="/entities/Status/#mentions" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  Status#mentions
</a>
<a href="/entities/Status/#tags" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  Status#tags
</a>
<a href="/entities/Status/#emojis" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-arrow-right"></i></div>
  Status#emojis
</a>
<h3 id="links">Link shortening</h3>
<p>Links in Mastodon are not shortened using URL shorteners, and the usage of URL shorteners is heavily discouraged. URLs in text always count for 23 characters and are intended to be shortened visually. For that purpose, a link is marked up like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#ff79c6">a</span> <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://example.com/page/that/is/very/long&#34;</span>&gt;
  &lt;<span style="color:#ff79c6">span</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;invisible&#34;</span>&gt;https://&lt;/<span style="color:#ff79c6">span</span>&gt;
  &lt;<span style="color:#ff79c6">span</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;ellipsis&#34;</span>&gt;example.com/page&lt;/<span style="color:#ff79c6">span</span>&gt;
  &lt;<span style="color:#ff79c6">span</span> <span style="color:#50fa7b">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;invisible&#34;</span>&gt;/that/is/very/long&lt;/<span style="color:#ff79c6">span</span>&gt;
&lt;/<span style="color:#ff79c6">a</span>&gt;
</code></pre></div><p>The spans with the <code>invisible</code> class can be hidden. The middle span is intended to remain visible. It may have no class if the URL is not very long; otherwise, it will have an <code>ellipsis</code> class. No ellipsis (<code>…</code>) character is inserted in the markup; instead, you are expected to insert it yourself if you need it in your app.</p>
<h2 id="filters">Filters</h2>
<h3 id="server-filtered">Server-side filtering (v2, Mastodon 4.0 and above)</h3>
<p>If a filter applies to a Status, a corresponding FilterResult will be included in the <code>filtered</code> attribute. Clients should check this attribute for any matches and use them to apply the intended filter action.</p>
<p>However, client implementations may still want to perform their own rule matching client-side, as this would allow retroactively applying filter changes without re-fetching posts from the server. When doing so, they should take care to not ignore <code>filtered</code> entries for which there are other attributes than <code>keyword_matches</code>, so as to handle extensions of the filtering system (e.g. <code>status_matches</code>).</p>
<p>Matched filters need to be filtered based on context (<code>home</code>, <code>notifications</code>, <code>public</code>, <code>thread</code> or <code>profile</code>) and expiration date.</p>
<p>When at least one active matched filter has <code>hide</code> for <code>filter_action</code>, the post should not be shown at all. Otherwise, if at least one active matched filter has <code>warn</code> for <code>filter_action</code>, the post should be hidden with a warning, and the user should be able to reveal the post after being informed of which filters matched (identified by <code>title</code> rather than the exact matched keywords).</p>
<p>For extension purposes, unknown values for <code>filter_action</code> should be treated as <code>warn</code>.</p>
<h3 id="client-filtered">Client-side filtering (v1, prior to Mastodon 4.0)</h3>
<p>Clients must do their own text filtering based on filters returned from the API. The server will apply <code>irreversible</code> filters for <code>home</code> and <code>notifications</code> contexts, but <strong>anything else is still up to the client to filter</strong>! If a status is somehow not removed by an <code>irreversible</code> filter, the client should still filter it.</p>
<p>Expired filters are not deleted by the server. They should no longer be applied, but they are still stored by the server, as users may update the expiry time to re-enable the filter. It is up to users to delete those filters eventually, if they wish to do so.</p>
<p>If <code>whole_word</code> is true, the client app should do the following:</p>
<ul>
<li>Define ‘word constituent characters’ for your app. In the official implementation, it’s <code>[A-Za-z0-9_]</code> in JavaScript, and <code>[[:word:]]</code> in Ruby. Ruby uses the POSIX character class (Letter | Mark | Decimal_Number | Connector_Punctuation).</li>
<li>If the phrase starts with a word character, and if the previous character before the matched range is a word character, its matched range should be treated to not match.</li>
<li>If the phrase ends with a word character, and if the next character after the matched range is a word character, its matched range should be treated to not match.</li>
</ul>
<p>Please check <code>app/javascript/mastodon/selectors/index.js</code> and <code>app/lib/feed_manager.rb</code> in the Mastodon source code for more details.</p>
<a href="https://github.com/mastodon/mastodon/blob/main/app/javascript/mastodon/selectors/index.js" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-external-link-square-alt"></i></div>
  app/javascript/mastodon/selectors/index.js
</a>

<a href="https://github.com/mastodon/mastodon/blob/main/app/lib/feed_manager.rb" class="page-ref">
  <div class="page-ref-icon"><i class="fa fa-external-link-square-alt"></i></div>
  app/lib/feed_manager.rb
</a>

<h2 id="focal-points">Focal points for cropping media thumbnails</h2>
<p>Server-side preview images are never cropped, to support a variety of apps and user interfaces. Therefore, the cropping must be done by those apps. To crop intelligently, focal points can be used to ensure a certain section of the image is always within the cropped viewport. See this <a href="https://github.com/jonom/jquery-focuspoint#1-calculate-your-images-focus-point">guide on how focal points are defined</a>. In summary, floating points range from -1.0 to 1.0, left-to-right or bottom-to-top. (0,0) is the center of the image. (0.5, 0.5) would be in the center of the upper-right quadrant. (-0.5, -0.5) would be in the center of the lower-left quadrant. For reference, thumbnails in the Mastodon front end are most commonly 16:9.</p>
<figure><img src="/assets/focal-points.jpg"
         alt="A demonstration of various focal points and their coordinates."/><figcaption>
            <p>A demonstration of various focal points and their coordinates.</p>
        </figcaption>
</figure>


    






  
  
    
        
          
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
                    
        
          
          
            
            <div style="margin: 30px 0px">            
              <a id="previousLink" href="javascript:void(0)" style="font-size: 12pt">Previous - Page</a>
              <div id="pageTurnSpacer" style="display:inline; margin: 0px 50px"></div>            
              <a id="nextLink" href="javascript:void(0)" style="font-size: 12pt">Next - Page</a>
            </div>
            
            <div id="useJS" style="display: none">1</div>
                      
        
            
    
                    
        
          
                      
        
            
    
                    
        
          
                      
        
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
  
  
  
    
    
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
  

                  
<script>
 
 var previousLink = document.getElementById("previousLink");
 var nextLink = document.getElementById("nextLink");
 var pageTurnSpacer = document.getElementById("pageTurnSpacer");
 var useJS = document.getElementById("useJS");
 
 
 if (useJS.innerHTML == "1") {
   
   var whatIsActive = -1, prevHref, prevName, nextHref, nextName;

   
   var selectNavs = document.getElementsByTagName("nav");
   var selectSidebar;
   for (i = 0; i < selectNavs.length; i++) {
     if (selectNavs[i].className == "sidebar") {
       selectSidebar = selectNavs[i]; 
     }
   }

   
   
   var selectSubMenus = selectSidebar.getElementsByClassName("sub-menu");
   
   var indexActive, indexPrev, indexNext; 
   for (i = 0; i < selectSubMenus.length; i++) {
     let curNavSection = selectSubMenus[i].getElementsByTagName("a");
     
     for (j = 0; j < curNavSection.length; j++) {
       if (curNavSection[j].className == "active") {
        if (j == 0) { 
          prevHref = "remove";    
          nextHref = curNavSection[j+1].href;
          nextName = curNavSection[j+1].innerText;
          whatIsActive = i;
        } else if (j == curNavSection.length - 1) { 
          prevHref = curNavSection[j-1].href;
          prevName = curNavSection[j-1].innerText;
          nextHref = "remove";
          whatIsActive = i;   
        } else { 
          prevHref = curNavSection[j-1].href;
          prevName = curNavSection[j-1].innerText;
          nextHref = curNavSection[j+1].href;
          nextName = curNavSection[j+1].innerText;
          whatIsActive = i;
        }
         break;
       }
     }
     if (whatIsActive != -1) { break; } 
   }
   
   if (prevHref == "remove") {
     previousLink.remove();
     pageTurnSpacer.remove();
     nextLink.href = nextHref;
     nextLink.innerHTML = nextLink.innerHTML.replace("Page", nextName);
   } else if (nextHref == "remove") {
     previousLink.href = prevHref;
     previousLink.innerHTML = previousLink.innerHTML.replace("Page", prevName);
     nextLink.remove();
   } else {
     previousLink.href = prevHref;
     previousLink.innerHTML = previousLink.innerHTML.replace("Page", prevName);
     nextLink.href = nextHref;
     nextLink.innerHTML = nextLink.innerHTML.replace("Page", nextName);
   }
 }
</script>

    <p style="color: #687590;">
      Last updated January 1, 0001 · <a href='https://github.com/mastodon/documentation/tree/main/content/en/api/guidelines.md' style="color: #687590;">Improve this page</a>

      
    </p>

  </div>
</main>
  </div>

  <footer class="footer container">
  <div class="sponsorship">
    <div class="container">
      <h2>
        Sponsored by
      </h2>

      <div class="logo-grid">
        <div>
          <a href="https://www.dotcom-monitor.com/es/">
            <img src="/assets/sponsors/dotcom-monitor-logo.png" alt="Dotcom-Monitor" />
          </a>

          <a href="https://www.loadview-testing.com/products/jmeter-load-testing/">
            <img src="/assets/sponsors/LoadView-logo.png" alt="LoadView" />
          </a>

          <a href="http://www.stevetures.com/">
            <img src="/assets/sponsors/stephen-tures.jpg" alt="Stephen Tures" />
          </a>

          <a href="https://swayable.com">
            <img src="/assets/sponsors/swayable.jpeg" alt="Swayable" />
          </a>

          <a href="https://www.sponsormotion.com/">
            <img src="/assets/sponsors/SponsorMotion.png" alt="SponsorMotion" />
          </a>
        </div>
      </div>
    </div>
  </div>

  <p class="legal legal--right">
    <a href='https://joinmastodon.org'>Join Mastodon</a> · <a href='https://blog.joinmastodon.org'>Blog</a> · <a href='https://mastodon.social/@Mastodon' target='_blank'><i class='fab fa-mastodon'></i></a>
  </p>

  <p class="legal"><a href='https://github.com/mastodon/documentation/tree/main/content/en/api/guidelines.md'>View source</a> · <a href='https://creativecommons.org/licenses/by-sa/4.0/'>CC BY-SA 4.0</a> · <a href='https://joinmastodon.org/imprint'>Imprint</a></p>
</footer>

</body>

</html>
