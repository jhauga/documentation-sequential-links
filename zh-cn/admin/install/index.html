<!DOCTYPE html>
<html lang="zh-cn">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>

<link rel="shortcut icon" type="image/png" href="/favicon.ico"/>


<link rel='stylesheet' href='/style.min.5af88e097fb823eccd8d5128d6e13bd95cc412dcd96b8066c8ec524026c5d229.css'>


<script src='/main.min.0b774fda2366fc06803dd619b7467da11181c73a4ef394b7610a2eb2a3cb7b5d.js' async></script>


  <title>ä»æºä¸­å®‰è£… - Mastodon documentation</title>

  <meta property="og:type" content="article">
  <meta property="og:url" content="http://localhost:1313/zh-cn/admin/install/">

  
    <meta name="description" content="åˆ›å»ºä½ è‡ªå·±çš„Mastodonç«™ç‚¹çš„æ•™å­¦æŒ‡çŒ®ã€‚">
    <meta property="og:description" content="åˆ›å»ºä½ è‡ªå·±çš„Mastodonç«™ç‚¹çš„æ•™å­¦æŒ‡çŒ®ã€‚">
    <meta name="twitter:description" content="åˆ›å»ºä½ è‡ªå·±çš„Mastodonç«™ç‚¹çš„æ•™å­¦æŒ‡çŒ®ã€‚">
  

  <meta name="twitter:title" content="ä»æºä¸­å®‰è£…">
  <meta name="twitter:site" content="@joinmastodon">

  <link rel="canonical" href="http://localhost:1313/zh-cn/admin/install/">
</head>

<body>
  <div class="container sidebar-layout">
    <nav class="sidebar"><a class="brand" href="/">
  <img class="link-logo" src="/brand.svg" alt="Mastodon" />
</a>

<input id="mobile-nav-toggle" class="mobile-nav-toggle" type="checkbox">
<label for="mobile-nav-toggle">
    <span class="menu-open">
        <i class="fa fa-times"></i> Close
    </span>
    <span class="menu-close">
        <i class="fa fa-bars"></i> Menu
    </span>
</label>

<ul>
  
  
    <li>
      
        <a href="/zh-cn/" class="">ä»€ä¹ˆæ˜¯Mastodonï¼Ÿ</a>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">ä½¿ç”¨Mastodon</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/zh-cn/user/signup/" class="">åˆ›å»ºä¸€ä¸ªå¸æˆ·</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/profile/" class="">è®¾ç½®ä¸ªäººèµ„æ–™</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/posting/" class="">å‘å¸ƒå˜Ÿæ–‡</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/network/" class="">ä½¿ç”¨ç¤¾äº¤åŠŸèƒ½</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/moderating/" class="">å¤„ç†ä¸æƒ³è¦çš„å†…å®¹</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/discoverability/" class="">æ¨å¹¿è‡ªå·±å’Œä»–äºº</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/preferences/" class="">è®¾ç½®ä½ çš„é¦–é€‰é¡¹</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/contacts/" class="">æ›´å¤šè®¾ç½®</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/external/" class="">ç«™å¤–ä½¿ç”¨Mastodon</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/moving/" class="">è¿ç§»æˆ–åˆ é™¤å¸æˆ·</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/user/run-your-own/" class="">è¿è¡Œè‡ªå·±çš„æœåŠ¡å™¨</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">è¿è¥Mastodon</span>
      

      
        <ul class="sub-menu">
          
            <li>
              <a href="/zh-cn/admin/prerequisites/" class="">å‡†å¤‡ä½ çš„æœºå™¨</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/install/" class="active">ä»æºä¸­å®‰è£…</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/config/" class="">è®¾ç½®ä½ çš„ç¯å¢ƒ</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/optional/" class="">å®‰è£…å¯é€‰ç‰¹è‰²åŠŸèƒ½</a>

              
                <ul class="sub-menu">
                  
                    <li>
                      <a href="/zh-cn/admin/optional/elasticsearch/" class="">å…¨æ–‡æœç´¢</a>
                    </li>
                  
                    <li>
                      <a href="/zh-cn/admin/optional/tor/" class="">åŒ¿åæœåŠ¡</a>
                    </li>
                  
                    <li>
                      <a href="/zh-cn/admin/optional/sso/" class="">å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰</a>
                    </li>
                  
                </ul>
              
            </li>
          
            <li>
              <a href="/zh-cn/admin/setup/" class="">é…ç½®ä½ çš„æ–°å®ä¾‹</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/tootctl/" class="">ä½¿ç”¨ç®¡ç†å‘½ä»¤è¡Œ</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/upgrading/" class="">å‡çº§åˆ°æ–°ç‰ˆæœ¬</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/backups/" class="">å¤‡ä»½ä½ çš„æœåŠ¡å™¨</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/migrating/" class="">è¿ç§»åˆ°æ–°æœºå™¨</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/scaling/" class="">ä¼¸ç¼©ä½ çš„æœåŠ¡å™¨</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/moderation/" class="">è¿è¥æ“ä½œ</a>

              
            </li>
          
            <li>
              <a href="/zh-cn/admin/troubleshooting/" class="">æ•…éšœåˆ†æ</a>

              
            </li>
          
        </ul>
      
    </li>
  
    <li>
      
        <span class="sub-title">å¼€å‘Mastodonåº”ç”¨</span>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">å‘Mastodoné¡¹ç›®åšè´¡çŒ®</span>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">éµå¾ªçš„æ ‡å‡†</span>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">REST API</span>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">API æ–¹æ³•</span>
      

      
    </li>
  
    <li>
      
        <span class="sub-title">API å®ä½“</span>
      

      
    </li>
  
</ul>
</nav>
    <main>
  <h1>ä»æºä¸­å®‰è£…</h1>

  
    <p>åˆ›å»ºä½ è‡ªå·±çš„Mastodonç«™ç‚¹çš„æ•™å­¦æŒ‡çŒ®ã€‚</p>
  
  <aside>
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#pre-requisites">å‰ææ¡ä»¶</a>
          <ul>
            <li><a href="#system-repositories">è½¯ä»¶ä»“åº“</a></li>
            <li><a href="#system-packages">è½¯ä»¶åŒ…</a></li>
            <li><a href="#installing-ruby">å®‰è£… Ruby</a></li>
          </ul>
        </li>
        <li><a href="#setup">é…ç½®</a>
          <ul>
            <li><a href="#setting-up-postgresql">é…ç½® PostgreSQL</a></li>
            <li><a href="#setting-up-mastodon">é…ç½® Mastodon</a></li>
            <li><a href="#setting-up-nginx">é…ç½® nginx</a></li>
            <li><a href="#acquiring-a-ssl-certificate">è·å–SSLè¯ä¹¦</a></li>
            <li><a href="#setting-up-systemd-services">é…ç½® systemd æœåŠ¡</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </aside>
  <div class="e-content">
    <h2 class="heading" id="pre-requisites">
	<span class="heading__text">å‰ææ¡ä»¶</span>
	<a class="heading__anchor-link" href="#pre-requisites">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h2><ul>
<li>ä¸€å°ä½ æœ‰rootè®¿é—®æƒé™çš„è¿è¡Œ <strong>Ubuntu 18.04</strong> çš„æœºå™¨</li>
<li>ä¸€ä¸ªç”¨äºMastodonç«™ç‚¹çš„<strong>åŸŸå</strong>ï¼ˆæˆ–ä¸€ä¸ªå­åŸŸåï¼‰ï¼Œä¾‹å¦‚ï¼š<code>example.com</code></li>
<li>ä¸€ä¸ªç”µå­é‚®ä»¶å‘é€æœåŠ¡æä¾›å•†ï¼Œæˆ–å…¶ä»–<strong>SMTPæœåŠ¡å™¨</strong></li>
</ul>
<p>ä½ éœ€è¦ä½¿ç”¨rootç”¨æˆ·è¿è¡Œå‘½ä»¤ã€‚å¦‚æœä½ ç°åœ¨ä¸æ˜¯rootç”¨æˆ·ï¼Œè¯·åˆ‡æ¢è‡³rootç”¨æˆ·ï¼š</p>
<h3 class="heading" id="system-repositories">
	<span class="heading__text">è½¯ä»¶ä»“åº“</span>
	<a class="heading__anchor-link" href="#system-repositories">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>é¦–å…ˆç¡®ä¿å·²ç»å®‰è£…curlï¼š</p>
<h4 class="heading" id="node-js">
	<span class="heading__text">Node.js</span>
	<a class="heading__anchor-link" href="#node-js">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -sL https://deb.nodesource.com/setup_12.x | bash -
</span></span></code></pre></div><h4 class="heading" id="yarn">
	<span class="heading__text">Yarn</span>
	<a class="heading__anchor-link" href="#yarn">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | apt-key add -
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#34;deb https://dl.yarnpkg.com/debian/ stable main&#34;</span> | tee /etc/apt/sources.list.d/yarn.list
</span></span></code></pre></div><h3 class="heading" id="system-packages">
	<span class="heading__text">è½¯ä»¶åŒ…</span>
	<a class="heading__anchor-link" href="#system-packages">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt update
</span></span><span style="display:flex;"><span>apt install -y <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  imagemagick ffmpeg libpq-dev libxml2-dev libxslt1-dev file git-core <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  g++ libprotobuf-dev protobuf-compiler pkg-config nodejs gcc autoconf <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  bison build-essential libssl-dev libyaml-dev libreadline6-dev <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  zlib1g-dev libncurses5-dev libffi-dev libgdbm5 libgdbm-dev <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  nginx redis-server redis-tools postgresql postgresql-contrib <span style="color:#f1fa8c">\
</span></span></span><span style="display:flex;"><span><span style="color:#f1fa8c"></span>  certbot python-certbot-nginx yarn libidn11-dev libicu-dev libjemalloc-dev
</span></span></code></pre></div><h3 class="heading" id="installing-ruby">
	<span class="heading__text">å®‰è£… Ruby</span>
	<a class="heading__anchor-link" href="#installing-ruby">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>å› ä¸ºä½¿ç”¨ rbenv å¯ä»¥æ›´å®¹æ˜“çš„è·å¾—æ­£ç¡®çš„ç‰ˆæœ¬å¹¶åœ¨æ–°ç‰ˆæœ¬å‘å¸ƒåè¿›è¡Œæ›´æ–°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ rbenv æ¥ç®¡ç†Rubyç‰ˆæœ¬ã€‚rbenv å¿…é¡»å®‰è£…åœ¨å•ä¸ªLinuxç”¨æˆ·ä¸­ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªMastodonç”¨æˆ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>adduser --disabled-login mastodon
</span></span></code></pre></div><p>åˆ‡æ¢åˆ°mastodonç”¨æˆ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - mastodon
</span></span></code></pre></div><p>æ‰§è¡Œä»¥ä¸‹æ­¥éª¤å®‰è£… rbenv å’Œ rbenv-buildï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/rbenv/rbenv.git ~/.rbenv
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> ~/.rbenv <span style="color:#ff79c6">&amp;&amp;</span> src/configure <span style="color:#ff79c6">&amp;&amp;</span> make -C src
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;export PATH=&#34;$HOME/.rbenv/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#f1fa8c">&#39;eval &#34;$(rbenv init -)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exec</span> bash
</span></span><span style="display:flex;"><span>git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
</span></span></code></pre></div><p>ä¸Šè¿°æ“ä½œå®Œæˆï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥å®‰è£…æ­£ç¡®çš„ Ruby ç‰ˆæœ¬ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">RUBY_CONFIGURE_OPTS</span><span style="color:#ff79c6">=</span>--with-jemalloc rbenv install 2.6.6
</span></span><span style="display:flex;"><span>rbenv global 2.6.6
</span></span></code></pre></div><p>æˆ‘ä»¬åŒæ ·éœ€è¦å®‰è£… bundlerï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gem install bundler --no-document
</span></span></code></pre></div><p>è¿”å›rootç”¨æˆ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span>
</span></span></code></pre></div><h2 class="heading" id="setup">
	<span class="heading__text">é…ç½®</span>
	<a class="heading__anchor-link" href="#setup">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h2><h3 class="heading" id="setting-up-postgresql">
	<span class="heading__text">é…ç½® PostgreSQL</span>
	<a class="heading__anchor-link" href="#setting-up-postgresql">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><h4 class="heading" id="performance-configuration-optional">
	<span class="heading__text">æ€§èƒ½è°ƒä¼˜ï¼ˆå¯é€‰ï¼‰</span>
	<a class="heading__anchor-link" href="#performance-configuration-optional">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><p>ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://pgtune.leopard.in.ua/#/">pgTune</a> ç”Ÿæˆä¸€ä¸ªåˆé€‚çš„é…ç½®æ–‡ä»¶ã€‚ç¼–è¾‘ <code>/etc/postgresql/9.6/main/postgresql.conf</code> ä¸­çš„ç›¸åº”æ•°å€¼å¹¶ä½¿ç”¨ <code>systemctl restart postgresql</code> å‘½ä»¤é‡å¯ PostgreSQLã€‚</p>
<h4 class="heading" id="creating-a-user">
	<span class="heading__text">åˆ›å»ºå¸æˆ·</span>
	<a class="heading__anchor-link" href="#creating-a-user">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><p>ä½ éœ€åˆ›å»ºä¸€ä¸ªä¾›Mastodonä½¿ç”¨çš„PostgreSQLå¸æˆ·ã€‚åˆ›å»ºä¸€ä¸ªä½¿ç”¨â€œidentâ€è®¤è¯æ–¹å¼çš„å¸æˆ·æ˜¯æœ€å®¹æ˜“çš„é…ç½®æ–¹æ³•ï¼Œå³PostgreSQLå¸æˆ·ä¸éœ€è¦ç‹¬ç«‹çš„å¯†ç å¹¶ç”±åŒåLinuxç”¨æˆ·ä½¿ç”¨ã€‚</p>
<p>æ‰“å¼€æ§åˆ¶å°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo -u postgres psql
</span></span></code></pre></div><p>åœ¨æ§åˆ¶å°ä¸­æ‰§è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#ff79c6">CREATE</span> <span style="color:#ff79c6">USER</span> mastodon <span style="color:#ff79c6">CREATEDB</span>;
</span></span><span style="display:flex;"><span>\q
</span></span></code></pre></div><p>å®Œæˆï¼</p>
<h3 class="heading" id="setting-up-mastodon">
	<span class="heading__text">é…ç½® Mastodon</span>
	<a class="heading__anchor-link" href="#setting-up-mastodon">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>ç°åœ¨è¯¥ä¸‹è½½Mastodonä»£ç äº†ã€‚åˆ‡æ¢è‡³mastodonç”¨æˆ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>su - mastodon
</span></span></code></pre></div><h4 class="heading" id="checking-out-the-code">
	<span class="heading__text">æ£€å‡ºä»£ç </span>
	<a class="heading__anchor-link" href="#checking-out-the-code">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><p>ä½¿ç”¨gitä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆMastodonï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/mastodon/mastodon.git live <span style="color:#ff79c6">&amp;&amp;</span> <span style="color:#8be9fd;font-style:italic">cd</span> live
</span></span><span style="display:flex;"><span>git checkout <span style="color:#ff79c6">$(</span>git tag -l | grep -v <span style="color:#f1fa8c">&#39;rc[0-9]*$&#39;</span> | sort -V | tail -n 1<span style="color:#ff79c6">)</span>
</span></span></code></pre></div><h4 class="heading" id="installing-the-last-dependencies">
	<span class="heading__text">å®‰è£…ä¾èµ–</span>
	<a class="heading__anchor-link" href="#installing-the-last-dependencies">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><p>ç°åœ¨ï¼Œå®‰è£…Rubyå’ŒJavaScriptä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bundle config deployment <span style="color:#f1fa8c">&#39;true&#39;</span>
</span></span><span style="display:flex;"><span>bundle config without <span style="color:#f1fa8c">&#39;development test&#39;</span>
</span></span><span style="display:flex;"><span>bundle install -j<span style="color:#ff79c6">$(</span>getconf _NPROCESSORS_ONLN<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>yarn install --pure-lockfile
</span></span></code></pre></div><div class="hint hint-info">
  <div class="hint-icon"><i class="fa fa-info-circle"></i></div>

  ä¸¤ä¸ª<code>bundle config</code>å‘½ä»¤ä»…ä»…ç¬¬ä¸€æ¬¡å®‰è£…ä¾èµ–æ—¶éœ€è¦ã€‚å¦‚æœä½ ä¹‹åè¿›è¡Œå‡çº§æˆ–é‡å®‰è£…ä¾èµ–ï¼Œåªéœ€è¦<code>bundle install</code>å°±å¤Ÿäº†ã€‚
</div>

<h4 class="heading" id="generating-a-configuration">
	<span class="heading__text">ç”Ÿæˆé…ç½®æ–‡ä»¶</span>
	<a class="heading__anchor-link" href="#generating-a-configuration">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h4><p>è¿è¡Œäº¤äº’å¼å®‰è£…å‘å¯¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">RAILS_ENV</span><span style="color:#ff79c6">=</span>production bundle <span style="color:#8be9fd;font-style:italic">exec</span> rake mastodon:setup
</span></span></code></pre></div><p>å®ƒå°†ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶</li>
<li>é¢„ç¼–è¯‘é™æ€æ–‡ä»¶</li>
<li>åˆ›å»ºæ•°æ®åº“schema</li>
</ul>
<p>é…ç½®æ–‡ä»¶è¢«ä¿å­˜åœ¨<code>.env.production</code>ã€‚å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹å¹¶ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ã€‚è¯·å‚é˜…<a href="/zh-cn/admin/config/">é…ç½®æ–‡ä»¶çš„æ–‡æ¡£</a>ã€‚</p>
<p>ä½ å·²ç»å®Œæˆéœ€ä½¿ç”¨mastodonç”¨æˆ·è¿›è¡Œçš„æ“ä½œï¼Œè¯·åˆ‡æ¢å›rootç”¨æˆ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span>
</span></span></code></pre></div><h3 class="heading" id="setting-up-nginx">
	<span class="heading__text">é…ç½® nginx</span>
	<a class="heading__anchor-link" href="#setting-up-nginx">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>ä»Mastodonç›®å½•å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡ç‰ˆåˆ°nginxï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp /home/mastodon/live/dist/nginx.conf /etc/nginx/sites-available/mastodon
</span></span><span style="display:flex;"><span>ln -s /etc/nginx/sites-available/mastodon /etc/nginx/sites-enabled/mastodon
</span></span></code></pre></div><p>ç¼–è¾‘ <code>/etc/nginx/sites-available/mastodon</code></p>
<ol>
<li>æ›¿æ¢ <code>example.com</code> ä¸ºä½ è‡ªå·±çš„åŸŸå</li>
<li>å¯ç”¨ <code>ssl_certificate</code> å’Œ <code>ssl_certificate_key</code> è¿™ä¸¤è¡Œï¼Œå¹¶æŠŠå®ƒä»¬æ›¿æ¢æˆå¦‚ä¸‹ä¸¤è¡Œï¼ˆå¦‚æœä½ ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦çš„è¯åˆ™å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ï¼‰</li>
</ol>
<pre tabindex="0"><code>ssl_certificate     /etc/ssl/certs/ssl-cert-snakeoil.pem;
ssl_certificate_key /etc/ssl/private/ssl-cert-snakeoil.key;
</code></pre><ol start="3">
<li>ä½ è¿˜å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚åšå‡ºå…¶å®ƒçš„ä¸€äº›è°ƒæ•´ã€‚</li>
</ol>
<p>é‡è½½ nginx ä»¥ä½¿å˜æ›´ç”Ÿæ•ˆï¼š</p>
<h3 class="heading" id="acquiring-a-ssl-certificate">
	<span class="heading__text">è·å–SSLè¯ä¹¦</span>
	<a class="heading__anchor-link" href="#acquiring-a-ssl-certificate">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>æˆ‘ä»¬å°†ä½¿ç”¨ Letâ€™s Encrypt è·å–ä¸€ä¸ªå…è´¹çš„SSLè¯ä¹¦ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>certbot --nginx -d example.com
</span></span></code></pre></div><p>è¿™ä¸ªå‘½ä»¤å°†è·å–ä¸€ä¸ªè¯ä¹¦ï¼Œè‡ªåŠ¨æ›´æ–° <code>/etc/nginx/sites-available/mastodon</code> ä»¥ä½¿ç”¨æ–°è¯ä¹¦å¹¶é‡è½½nginxä»¥ä½¿å˜æ›´ç”Ÿæ•ˆã€‚</p>
<p>ç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿé€šè¿‡æµè§ˆå™¨è®¿é—®ä½ çš„åŸŸåï¼Œç„¶åçœ‹åˆ°ä¸€åªå¤§è±¡é”¤å‡»ç”µè„‘å±å¹•çš„é”™è¯¯é¡µé¢ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰å¯åŠ¨Mastodonè¿›ç¨‹ã€‚</p>
<h3 class="heading" id="setting-up-systemd-services">
	<span class="heading__text">é…ç½® systemd æœåŠ¡</span>
	<a class="heading__anchor-link" href="#setting-up-systemd-services">
		<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="1em" height="1em" alt="ğŸ”—&#xFE0E;" viewBox="0 0 457.03 457.03"
	 xml:space="preserve">
	<path fill="currentColor" d="M421.512,207.074l-85.795,85.767c-47.352,47.38-124.169,47.38-171.529,0c-7.46-7.439-13.296-15.821-18.421-24.465
		l39.864-39.861c1.895-1.911,4.235-3.006,6.471-4.296c2.756,9.416,7.567,18.33,14.972,25.736c23.648,23.667,62.128,23.634,85.762,0
		l85.768-85.765c23.666-23.664,23.666-62.135,0-85.781c-23.635-23.646-62.105-23.646-85.768,0l-30.499,30.532
		c-24.75-9.637-51.415-12.228-77.373-8.424l64.991-64.989c47.38-47.371,124.177-47.371,171.557,0
		C468.869,82.897,468.869,159.706,421.512,207.074z M194.708,348.104l-30.521,30.532c-23.646,23.634-62.128,23.634-85.778,0
		c-23.648-23.667-23.648-62.138,0-85.795l85.778-85.767c23.665-23.662,62.121-23.662,85.767,0
		c7.388,7.39,12.204,16.302,14.986,25.706c2.249-1.307,4.56-2.369,6.454-4.266l39.861-39.845
		c-5.092-8.678-10.958-17.03-18.421-24.477c-47.348-47.371-124.172-47.371-171.543,0L35.526,249.96
		c-47.366,47.385-47.366,124.172,0,171.553c47.371,47.356,124.177,47.356,171.547,0l65.008-65.003
		C246.109,360.336,219.437,357.723,194.708,348.104z"/>
</svg>
	</a>
</h3><p>ä»Mastodonç›®å½•å¤åˆ¶systemdæœåŠ¡æ¨¡ç‰ˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cp /home/mastodon/live/dist/mastodon-*.service /etc/systemd/system/
</span></span></code></pre></div><p>ç„¶åä¿®æ”¹ä»¥ä¸‹æ–‡ä»¶ï¼Œä»¥ä¿è¯ç”¨æˆ·åä¸è·¯å¾„æ˜¯æ­£ç¡®çš„ï¼š</p>
<ul>
<li><code>/etc/systemd/system/mastodon-web.service</code></li>
<li><code>/etc/systemd/system/mastodon-sidekiq.service</code></li>
<li><code>/etc/systemd/system/mastodon-streaming.service</code></li>
</ul>
<p>æœ€åï¼Œå¯åŠ¨æ–°systemdæœåŠ¡å¹¶å°†è¯¥æœåŠ¡è®¾ä¸ºå¼€æœºè‡ªåŠ¨æ¿€æ´»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl start mastodon-web mastodon-sidekiq mastodon-streaming
</span></span><span style="display:flex;"><span>systemctl <span style="color:#8be9fd;font-style:italic">enable</span> mastodon-*
</span></span></code></pre></div><p>ä»–ä»¬å°†åœ¨å¼€æœºå¯åŠ¨æ—¶è‡ªåŠ¨å¼€å§‹è¿è¡Œã€‚</p>
<div class="hint hint-success">
  <div class="hint-icon"><i class="fa fa-check-circle"></i></div>

  <strong>æ¬¢å‘¼å§ï¼ä½ ç°åœ¨å¯ä»¥ä»æµè§ˆå™¨ä¸­è®¿é—®ä½ çš„åŸŸåäº†ï¼</strong>
</div>

<figure>
    <p>
        <strong>ç¿»è¯‘çŠ¶æ€ï¼š</strong>
        æœ¬æ–‡æ˜¯è‹±æ–‡é¡µé¢ <a href="/admin/install/">Installing from source</a> çš„ç¿»è¯‘ï¼Œæœ€åç¿»è¯‘æ—¶é—´ï¼šï¼Œç‚¹å‡»<a href="https://github.com/mastodon/documentation/compare/ad1ef20f171c9f61439f32168987b0b4f9abd74b...master">è¿™é‡Œ</a>å¯ä»¥æŸ¥çœ‹ç¿»è¯‘åé¡µé¢çš„æ”¹åŠ¨ã€‚
    </p>
</figure>


    






  
  
  
  
    
    
    
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
    
      
        
          
                  
        
      
      
  
  
  
    
    
    
    
      
        
          
          
        
        
      
    
      
        
          
          
            
            
<div style="margin: 30px 0px">
  <a id="previousLink" href="javascript:void(0)" style="font-size: 12pt">
    <i class="fa fa-arrow-left"></i> Page
  </a>
  <div id="pageTurnSpacer" style="display:inline; margin: 0px 50px"></div>  
  <a id="nextLink" href="javascript:void(0)" style="font-size: 12pt">
    Page <i class="fa fa-arrow-right"></i>
  </a>
</div>
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
          
          
            
            
          
            
            
          
            
            
          
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
    
      
        
          
          
        
        
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  


<script>
 
 
 
 
 
 
 var theMenuTag = "nav";           
 var theMenuSideBar = "sidebar";   
 var theMenuSubMenu = "sub-menu";  
 var theMenuActivePage = "active"; 

 
 
 var previousLink = document.getElementById("previousLink");     
 var nextLink = document.getElementById("nextLink");             
 var pageTurnSpacer = document.getElementById("pageTurnSpacer"); 
 
 
 
 var whatIsActive = -1, prevHref, prevName, nextHref, nextName;

 
 var selectNavs = document.getElementsByTagName(theMenuTag); 
 var selectSidebar;                                          
 for (i = 0; i < selectNavs.length; i++) {                   
   if (selectNavs[i].className == theMenuSideBar) {          
     selectSidebar = selectNavs[i];                          
     break; 
   }
 }

 
 
 var selectSubMenus = selectSidebar.getElementsByClassName(theMenuSubMenu); 
 
 
 for (i = 0; i < selectSubMenus.length; i++) {                      
   let curNavSection = selectSubMenus[i].getElementsByTagName("a"); 
   
   for (j = 0; j < curNavSection.length; j++) {
     if (curNavSection[j].className == theMenuActivePage) { 
      if (j == 0) {                                
        prevHref = "remove";                        
        nextHref = curNavSection[j+1].href;         
        nextName = curNavSection[j+1].innerText;    
        whatIsActive = i; 
      } else if (j == curNavSection.length - 1) {  
        prevHref = curNavSection[j-1].href;         
        prevName = curNavSection[j-1].innerText;    
        nextHref = "remove";                        
        whatIsActive = i; 
      } else {                                     
        prevHref = curNavSection[j-1].href;         
        prevName = curNavSection[j-1].innerText;    
        nextHref = curNavSection[j+1].href;         
        nextName = curNavSection[j+1].innerText;    
        whatIsActive = i; 
      }
       
       break;
     }
   }
   
   if (whatIsActive != -1) { break; }
 }
 
 if (prevHref == "remove") { 
   previousLink.remove();                                             
   pageTurnSpacer.remove();                                           
   nextLink.href = nextHref;                                          
   nextLink.innerHTML = nextLink.innerHTML.replace("Page", nextName); 
 } else if (nextHref == "remove") { 
   previousLink.href = prevHref;                                              
   previousLink.innerHTML = previousLink.innerHTML.replace("Page", prevName); 
   nextLink.remove();                                                         
 } else { 
   previousLink.href = prevHref;                                              
   previousLink.innerHTML = previousLink.innerHTML.replace("Page", prevName); 
   nextLink.href = nextHref;                                                  
   nextLink.innerHTML = nextLink.innerHTML.replace("Page", nextName);         
 }                                                                            
 
</script>

    <p style="color: #687590;">
      æœ€åæ›´æ–°äº December 12, 2023 Â· <a href='https://github.com/mastodon/documentation/tree/main/content/zh-cn/admin%5cinstall.md' style="color: #687590;">æ”¹è¿›æ­¤é¡µé¢</a>

      
        <br />

        ä¹Ÿå¯åœ¨æ­¤æ‰¾åˆ°ï¼š

        
          <a href="/admin/install/" style="color: #687590;" hreflang="en">English</a>
        
      
    </p>

  </div>
</main>
  </div>

  <footer class="footer container">
  <div class="sponsorship">
    <div class="container">
      <h2>
        Sponsored by
      </h2>

      <div class="logo-grid">
        <div>
          <a href="https://www.dotcom-monitor.com/es/">
            <img src="/assets/sponsors/dotcom-monitor-logo.png" alt="Dotcom-Monitor" />
          </a>

          <a href="https://www.loadview-testing.com/products/jmeter-load-testing/">
            <img src="/assets/sponsors/LoadView-logo.png" alt="LoadView" />
          </a>

          <a href="http://www.stevetures.com/">
            <img src="/assets/sponsors/stephen-tures.jpg" alt="Stephen Tures" />
          </a>

          <a href="https://swayable.com">
            <img src="/assets/sponsors/swayable.jpeg" alt="Swayable" />
          </a>

          <a href="https://www.sponsormotion.com/">
            <img src="/assets/sponsors/SponsorMotion.png" alt="SponsorMotion" />
          </a>
        </div>
      </div>
    </div>
  </div>

  <p class="legal legal--right">
    <a href='https://joinmastodon.org'>åŠ å…¥Mastodon</a> Â· <a href='https://blog.joinmastodon.org'>åšå®¢</a> Â· <a href='https://mastodon.social/@Mastodon' target='_blank'><i class='fab fa-mastodon'></i></a>
  </p>

  <p class="legal"><a href='https://github.com/mastodon/documentation/tree/main/content/zh-cn/admin%5cinstall.md'>æŸ¥çœ‹æºä»£ç </a> Â· <a href='https://creativecommons.org/licenses/by-sa/4.0/'>CC BY-SA 4.0</a> Â· <a href='https://joinmastodon.org/imprint'>ç‰ˆæƒä¿¡æ¯</a></p>
</footer>

</body>

</html>
